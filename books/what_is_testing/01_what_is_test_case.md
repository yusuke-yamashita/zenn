---
title: "テストケースってなんなの？〜解決編〜" # 記事のタイトル

---

# はじめに

この記事は、2021年ごろに発表したテストケースってなんなの？の解決編です。

当時の様子は以下から確認できます。
https://yy-world.hatenadiary.com/entry/2024/12/08/000000

本稿では当時はマサカリが怖くて語れなかったテストケースについてもう少し深堀りして、
私が考えるテストケースの本質について言語化していきたいと思います。

# テストケースについて考える意義

「テストケース」とは現場によってさまざまな形があることを、上記のはてなダイアリーや「テストケースの形式性」という記事で言及しています。
一方で、「テストケース」という名前が存在しない現場は私は見たことがありません。
そのため、テストケースを捉えることがその現場を理解する近道であると考えています。
また、テストケースについて考察を深めることで、テスト開発やテストマネジメントへの洞察を深めることができると考えています。

# テストケースの用途

テストケースは大きくふたつの用途、性質があると考えます。

- テストを定義する
- テストの結果を記述する

これらを識別するために、2の方を「テスト手順書」としたり、「テストラン」という名前を使っている現場も存在します。
ISTQBでのテストケースについても、上記のテストケースを定義する用途で使われています。

本記事では、これらを名前として区別せずに、2つの性質を持つものを「テストケース」とします。

## テストを定義する用途としてのテストケース

テストを定義する用途としてのテストケースとは、「こういったテストをしますよ」ということを、形式的・あるいは体系的に記述したものです。
典型的には「事前条件」「入力値」「期待結果」「事前条件」のセットのことを指します。

これは「テスト」というものを「何かしらの入力を加えることで何かの結果が得られる」という性質を構造的に表現しています。

「期待結果」を記載する性質を持つテストケースの場合は、「結果が観測可能なひとつの形に収束する」ということを意味しています。
1+1は必ず2であり、3になることはありえず、あった場合は不具合ということです。

※この他にも、トレーサビリティのために「テストの目的」「テスト観点」「テスト条件」を記載したりする場合もあります。

### 定義するテストケースである条件

定義するテストケースがテストケースと判定できる条件があると考えます。
それは「一意性」です。

テストケースは必ず1件として数えられ、ユニークなテストとして識別できるべきであると考えます。
「このテストをしてこの結果が返ってきました」といえば、それが「テストケース」として紐づくような状態です。

テストを一意なものと識別するために「定義するためのテストケース」があると考えています。

## テストの結果を記述するためのテストケース

設計したテストケースは、多くの場合は実行結果が伴い管理される場合が多いです。
テスト設計というものは実行するテストを考えたり記述するために存在するからです。

テスト結果の記述としては、「こういったテストをしましたよ」ということを、形式的・あるいは体系的に記述したものです。
典型的には「ステータス」が挙げられます。

また、これらの他にも「実行日付」、「実行した人」、「テスト環境」などが挙げられます。

これらは「テスト結果」を端的に示す「ステータス」と、「テストの再現性」を担保するために記述する部分で分類できます。
※この他にも、トレーサビリティのために「不具合チケット」を記載する場合もあります。

### 結果を記述するテストケースである条件

結果を記述する場合も、テストの一意性が求められると思います。
「このテストは失敗しました」ということがその組織で求められるスコープ感で示されるべきだと考えます。

なので、1件のテストケース実行結果として「機能が悪いです」はあまり許容できないと考えます。

定義したテストケースに合わせて、「この結果を得られました」ということが一意に示されている必要があると考えています。

# テストケースのテンプレートに込められた意味

テストケースのテンプレートはさまざまなものが存在しますが、それぞれの項目には意味が込められています。
ベストプラクティスに従うことは悪い道はないですが、私はむしろそのテストケースの意味を理解して、それを目指してテスト設計を行ったり、テスト計画を行うことが大事だと考えています。

本記事では典型的な項目について、私の理解を記載します。

## テストケースの定義における典型的な項目

### 識別番号とトレーサビリティ

- テストケースナンバー
テストケースは識別できるものなので、テストケース〇〇という形で識別できる必要があります。
できれば機械的に裁判できると重複ができないので、都合がいいと思います。
固有の名前が必要な場合は、大抵はほかのトレーサビリティ目的の項目と同じ場合があります。

- テストケースの目的
テスト観点・テスト条件ともいいます。
これらはテストケースを実行する理由を端的に表します。
普通はテスト設計段階で識別したテスト観点やテスト条件と紐付きますが、テストケースに固有の名前をつけている場合もあります。
これを識別する目的はテスト設計でのトレーサビリティと、テスト実行のモチベーションをテスト実行者に示すためにも存在します。

### テスト対象が動作する前のものを定義するもの

- 事前条件
入力値を投入する前のテスト対象の条件を示したものです。
この場合の条件とは、「〇〇のデータが入っている」「〇〇の画面を表示している」を表すものです。
テストケースの中に「手順」がある場合は、それの開始条件となる場合があります。
この条件がきちんと明示されていないと、正しい条件でテストが開始されない場合があります。

- 入力値
テストを実行するために入力する値を指定します。
これには操作が含まれる場合と、単にパラメーターの値が示される場合があります。
これは手順と混同されやすいですが、デシジョンテーブルなどのテスト技法を使っている場合は、同様の手順を使って値のバリエーションをテストする場合があります。
その場合は識別して損のないテストケースです。

- 手順
テストケースを実行するための手順を示すものです。
JSTQBでいう、「テスト手順書」とはまったく違うものですので、この点には注意すべきでしょう。
これは「入力値を作るための手順」や、「入力値を投入するための手順」、「実際の結果を得るための手順」を得るために記載されることが多いです。

個人的には「別紙参照」のタイプが好きですが、これらもテストケースに含まれる場合が多いです。

### テスト対象の動作後について定義するもの

- 期待結果
前述の項目によって、テスト対象がどのようなふるまいをすべきかを記載したものです。
期待結果を書くことで、テスト結果がPassかFailかを判定することを助けます。
また、これらはテストの目的をより補強する役割を持つ場合もあります。

- 事後条件
期待結果でアウトプットを識別している場合、ソフトウェアの状態や周囲の環境の状態を外だししている場合があります。
また、後続のテストとの接続などを指定している場合も、この項目を識別している場合があります。

## テスト結果の記述

### ステータス
実際の結果を確認した結果、それがPassかFailか、あるいはその他のステータスかどうかを判定するために存在します。
これらのステータスについて、「合格」「失敗」や「OK」「NG」を記載している場合がありますが、私はPass、Failを推奨します。
「NG」は外国人には通用しないですし、「合格」や「OK」には人の判断が介在しているニュアンスがあると考えます。

なので、より客観的なニュアンスのある「Pass」が好ましいと考えます。
以下で典型的なステータスを表示します。
※一般的な規約と違う場合がある点は注意してください。

- Pass
期待結果と実際の結果が同じである場合
- Fail
期待結果と実際の結果が違っていた場合
- Block
既存のバグによってテスト実行ができない場合
- Pending
なんらかの理由によってテスト実行・あるいは実行結果の記載を保留にしている場合
- N/A
テスト設計を行ったが、テスト実行をしなかった場合

### 実行した証跡を残す

- テスト実行担当者
実行担当者が自明ではない場合に記載します。
なんかあったときにこの人に聞きます。

- テスト実施日
テスト実施日を記載します。
実行結果のトレーサビリティを取ります。

- テスト環境
テスト環境が複数ある場合は記載します。
典型的な例はブラウザなどです。

- 実行バージョン
実行バージョンが複数ありえる場合は、これらを記載します。

# ローレベルテストケースとハイレベルテストケース

JSTQBなどのさまざまな規約では、「ローレベルテストケース」「ハイレベルテストケース」を識別しています。
本記事でとりあげる内容は、一般的にいえば「ローレベルテストケース」だと考えます。
一方で、本記事のスタンスとしては、「どちらもテストケースである」です。

ハイレベルテストケースはローレベルテストケースを抽象化したものであるが、
たとえばハイレベルテストケースとローレベルテストケースは1対多にはならないという立場を私は取ります。

記述の粒度が違うだけで、「テストケース」が扱うテストの実行の粒度は変わらないというのが私の理解です。

# おわりに

「テストケース」を考えることは有意義だと考えます。

テスト設計のゴールを考えることになりますし、共通言語としての「テストケース」からさまざまなテストプロセスを考えることができるからです。

テストケースについて、ご意見がある方はぜひお便りをくだされば嬉しいです。